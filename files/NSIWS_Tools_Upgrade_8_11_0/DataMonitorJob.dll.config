<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
    <sectionGroup name="estat.sri">
      <section name="mapping.store" type="Estat.Sri.MappingStoreRetrieval.Config.MappingStoreConfigSection, Estat.Sri.Utils"/>
    </sectionGroup>
    <!--<section name="oracle.manageddataaccess.client"
            type="OracleInternal.Common.ODPMSectionHandler, Oracle.ManagedDataAccess, Version=4.121.2.0, Culture=neutral, PublicKeyToken=89b483f429c47342"/>-->
  </configSections>
  <appSettings>
    <!-- REST default base for SDMX RI. For SOAP the endpoint URL should be provided-->
    <add key="BaseResourceUrl" value="https://webgate.ec.europa.eu/nsi-jax-ws/rest/"/>
    <!-- Uncomment the following line and provide the -->
    <add key="WSDLUrl" value="https://webgate.ec.europa.eu/nsi-jax-ws/NSIStdV21Service?wsdl" /> 
    <!--<add key="WADLUrl" value="https://webgate.ec.europa.eu/nsi-jax-ws/rest/application.wadl"/>-->
    <add key="data.registrator.registry.http.username" value="abc"/>
    <add key="data.registrator.registry.http.password" value="abc"/>
    <add key="data.registrator.registry.http.useHttpAuthentication" value="false"/>
    <!--<add key="data.registrator.registry.endpoint.v21.wsdl" value="https://registry.sdmx.org/FusionRegistry/ws/soap/sdmxSoap.wsdl"/>-->
    <add key="data.registrator.registry.endpoint.v21" value="https://test2.registry.sdmx.org/FusionRegistry/ws/rest"/>
    <add key="data.registrator.registry.endpoint.isRest" value="true" />
    <add key="RetrieverFactory" value="MappingStoreRetrieversFactory"/>
    <add key="data.registrator.registry.useProxy" value="false"/>
    <add key="data.registrator.registry.useSystemProxy" value="false"/>
    <add key="data.registrator.registry.proxyHost" value="http://localhost"/>
    <add key="data.registrator.registry.proxyPort" value="1234"/>
    <add key="data.registrator.registry.proxyUsername" value="admin"/>
    <add key="data.registrator.registry.proxyPassword" value="123"/>
    <!-- Uncomment to read settings from a specific location-->
    <!-- <add key="configLocation" value="..\..\configFile\app.config"/> -->
  </appSettings>
  <connectionStrings>
    <clear/>
    <add name="MappingStoreServer" connectionString="Data Source=localhost;Initial Catalog=msdb_scratch;User Id=mauser;Password=123"
      providerName="System.Data.SqlClient"/>
    <add name="odp" connectionString="Data Source=oraclehost/xe;User ID=msdb_scratch;Password=123" providerName="Oracle.ManagedDataAccess.Client"/>
    <add name="mysql" connectionString="server=mariadbhost;user id=mauser;password=123;database=msdb_scratch;default command timeout=120"
      providerName="MySql.Data.MySqlClient"/>
  </connectionStrings>
  <log4net debug="false">
    <appender name="console" type="log4net.Appender.ColoredConsoleAppender, log4net">
      <mapping>
        <level value="INFO"/>
        <forecolor value="Green"/>
      </mapping>
      <mapping>
        <level value="ERROR"/>
        <forecolor value="Red"/>
      </mapping>
      <mapping>
        <level value="DEBUG"/>
        <forecolor value="Yellow"/>
      </mapping>
      <layout type="log4net.Layout.PatternLayout, log4net">
        <param name="ConversionPattern" value="%date{ISO8601} %-5level - %message%newline"/>
      </layout>
    </appender>
    <appender name="FileAppender" type="log4net.Appender.RollingFileAppender">
      <rollingStyle value="Date"/>
      <datePattern value="yyyyMMdd"/>
      <file value="${TMP}/datamonitorjob.log"/>
      <appendToFile value="true"/>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date{ISO8601}  %-5level %logger - %message%newline"/>
      </layout>
    </appender>
    <root>
      <level value="DEBUG"/>
      <appender-ref ref="FileAppender"/>
      <appender-ref ref="console"/>
    </root>
  </log4net>
  <!--<estat.sri>
        <mapping.store>
            <Dataflow ignoreProductionFlagForStructure="true"/>
        </mapping.store>
    </estat.sri>-->
  <estat.sri>
    <mapping.store>
      <!-- General Database settings apply to both Mapping Store (MSDB) and dissemination databases (DDB) -->
      <!-- Options are: -->
      <!-- provider : The .NET DB Provider name. Mandatory and unique -->
      <!-- subStringCmd : The substring command. Defaults to : SUBSTR -->
      <!-- subStringNeedsLength : Whether the substring command requires to specify the length. Defaults to : false -->
      <!-- parameterMarkerFormat : The named parameter format. Mandatory. -->
      <!-- castToStringFormat : The format text that should be used to cast to string. Defaults to: {0} -->
      <!-- dateCast : The date cast command. Defaults to "" -->
      <!-- subQueryOrderByAllowed : Whether a sub query can have an order by. Defaults to true. -->
      <DatabaseSettings>
        <clear/>
        <add provider="System.Data.SqlClient" subStringCmd="SUBSTRING" subStringNeedsLength="true" parameterMarkerFormat="@{0}"
          castToStringFormat="CAST({0} AS VARCHAR)" subQueryOrderByAllowed="false"/>
        <add provider="Oracle.ManagedDataAccess.Client" parameterMarkerFormat=":{0}" dateCast="DATE"/>
        <!-- Please note that System.Data.OracleClient is obsolete and no longer maintained by Microsoft. -->
        <add provider="System.Data.OracleClient" parameterMarkerFormat=":{0}" dateCast="DATE"/>
        <add provider="MySql.Data.MySqlClient" parameterMarkerFormat="@{0}" dateCast="DATE"/>
        <!-- DDB only providers -->
        <add provider="Org.Estat.PcAxis.PcAxisProvider" parameterMarkerFormat="@{0}"/>
        <!-- ODBC options depend on the ODBC driver used. -->
        <add provider="System.Data.Odbc" parameterMarkerFormat="?" subStringCmd="SUBSTRING" subStringNeedsLength="true"
          castToStringFormat="CAST({0} AS VARCHAR)" subQueryOrderByAllowed="false"/>
      </DatabaseSettings>
      <!-- Dissemination Database (DDB) settings only -->
      <!-- Options are: -->
      <!-- name : The DDB provider name. Mandatory and unique.-->
      <!-- provider : The .NET DB Provider name. -->
      <ddbSettings>
        <clear />
        <add name="SqlServer" provider="System.Data.SqlClient" factoryClass="" dllName="" />
        <add name="Oracle" provider="Oracle.ManagedDataAccess.Client" factoryClass="Oracle.ManagedDataAccess.Client.OracleClientFactory" dllName="Oracle.ManagedDataAccess" />
        <add name="PCAxis" provider="org.estat.PcAxis.PcAxisProvider" factoryClass="Org.Estat.PcAxis.PcAxisProvider" dllName="PcAxis" />
        <add name="MySQL" provider="MySql.Data.MySqlClient" factoryClass="MySql.Data.MySqlClient.MySqlClientFactory" dllName="MySql.Data" />
        <add name="Odbc" provider="System.Data.Odbc" factoryClass="System.Data.Odbc.OdbcFactory" dllName="System.Data.Odbc" />
      </ddbSettings>
    </mapping.store>
  </estat.sri>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.6.1"/>
    </startup>
<!--<system.data>
    <DbProviderFactories>
      <remove invariant="MySql.Data.MySqlClient"/>
      <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL"
          type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.9.10.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d"/>
      <remove invariant="Oracle.ManagedDataAccess.Client"/>
      <add name="ODP.NET, Managed Driver" invariant="Oracle.ManagedDataAccess.Client" description="Oracle Data Provider for .NET, Managed Driver"
          type="Oracle.ManagedDataAccess.Client.OracleClientFactory, Oracle.ManagedDataAccess, Version=4.122.1.0, Culture=neutral, PublicKeyToken=89b483f429c47342"/>
    </DbProviderFactories>
  </system.data>-->
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
<dependentAssembly>
<publisherPolicy apply="no"/>
<assemblyIdentity name="Oracle.ManagedDataAccess" publicKeyToken="89b483f429c47342" culture="neutral"/>
<bindingRedirect oldVersion="4.121.0.0 - 4.65535.65535.65535" newVersion="4.122.1.0"/>
</dependentAssembly>
</assemblyBinding>
</runtime>
</configuration>
